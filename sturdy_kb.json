[
    {
        "key": "ctrl+up",
        "command": "cursorMove",
        "args": {
            "to": "prevBlankLine",
            "value": 1,
            "select": false
        },
        "when": "editorTextFocus"
    },
    {
        "key": "ctrl+shift+up",
        "command": "cursorMove",
        "args": {
            "to": "prevBlankLine",
            "value": 1,
            "select": true
        },
        "when": "editorTextFocus"
    },
    {
        "key": "ctrl+down",
        "command": "cursorMove",
        "args": {
            "to": "nextBlankLine",
            "value": 1,
            "select": false
        },
        "when": "editorTextFocus"
    },
    {
        "key": "ctrl+shift+down",
        "command": "cursorMove",
        "args": {
            "to": "nextBlankLine",
            "value": 1,
            "select": true
        },
        "when": "editorTextFocus"
    },
    {
        "key": "ctrl+tab",
        "command": "workbench.action.nextEditorInGroup"
    },
    {
        "key": "ctrl+shift+tab",
        "command": "workbench.action.previousEditorInGroup"
    },
    {
        "key": "ctrl+pagedown",
        "command": "workbench.action.nextEditor"
    },
    {
        "key": "ctrl+pagedown",
        "command": "-workbench.action.nextEditor"
    },
    {
        "key": "ctrl+pageup",
        "command": "workbench.action.previousEditor"
    },
    {
        "key": "ctrl+pageup",
        "command": "-workbench.action.previousEditor"
    },
    {
        "key": "f21",
        "command": "bracket-select.select",
        "when": "editorTextFocus"
    },
    {
        "key": "alt+s",
        "command": "-bracket-select.select",
        "when": "editorTextFocus"
    },
    {
        "key": "f22",
        "command": "bracket-select.undo-select",
        "when": "editorTextFocus"
    },
    {
        "key": "alt+z",
        "command": "-bracket-select.undo-select",
        "when": "editorTextFocus"
    },
    {
        "key": ".",
        "command": "dance.select.left.jump",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "n",
        "command": "dance.select.down.jump",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "a",
        "command": "dance.select.up.jump",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "e",
        "command": "dance.run",
        "args": {
            "commands": [
                ".selections.reduce",
                ".select.right.jump"
            ]
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "p",
        "command": "dance.seek",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "d",
        "command": "dance.seek.included",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+p",
        "command": "dance.seek.backward",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+d",
        "command": "dance.seek.included.backward",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+c",
        "command": "dance.edit.replaceCharacters",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "c",
        "command": "dance.run",
        "args": {
            "commands": [
                [
                    ".selections.saveText",
                    {
                        "register": "tmp"
                    }
                ],
                [
                    ".edit.insert",
                    {
                        "register": "dquote"
                    }
                ],
                [
                    ".updateRegister",
                    {
                        "copyFrom": "tmp"
                    }
                ]
            ]
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+/",
        "command": "dance.history.repeat.seek",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+`",
        "command": "dance.edit.case.swap",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "`",
        "command": "dance.edit.case.toLower",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+`",
        "command": "dance.edit.case.toUpper",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "home",
        "command": "dance.select.lineStart",
        "args": {
            "shift": "jump"
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "end",
        "command": "dance.select.lineEnd",
        "args": {
            "shift": "jump"
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "m",
        "command": "dance.seek.word",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "q",
        "command": "dance.seek.word.backward",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "l",
        "command": "dance.seek.wordEnd",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+m",
        "command": "dance.seek.word",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+q",
        "command": "dance.seek.word.backward",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+l",
        "command": "dance.seek.wordEnd",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "g",
        "command": "dance.modes.set",
        "args": {
            "mode": "select"
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+y",
        "command": "dance.select.lineStart",
        "args": {
            "shift": "jump"
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "y",
        "command": "dance.openMenu",
        "args": {
            "menu": "goto-hx",
            "pass": [
                {
                    "shift": "jump"
                }
            ]
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+i",
        "command": "workbench.action.showCommands",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "o",
        "command": "dance.modes.insert.before",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "s",
        "command": "dance.run",
        "args": {
            "commands": [
                ".modes.insert.after",
                ".select.right.jump"
            ]
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "u",
        "command": "dance.run",
        "args": {
            "commands": [
                ".selections.reduce",
                ".edit.newLine.below.insert"
            ]
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+o",
        "command": "dance.modes.insert.lineStart",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+s",
        "command": "dance.run",
        "args": {
            "commands": [
                [
                    ".select.lineEnd",
                    {
                        "shift": "jump"
                    }
                ],
                ".select.right.jump",
                ".modes.insert.before"
            ]
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+u",
        "command": "dance.edit.newLine.above.insert",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "r",
        "command": "dance.edit.yank-delete",
        "args": {
            "register": "dquote"
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+r",
        "command": "dance.edit.delete",
        "args": {
            "register": "dquote"
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "w",
        "command": "dance.edit.yank-delete-insert",
        "args": {
            "register": "dquote"
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+w",
        "command": "dance.edit.delete-insert",
        "args": {
            "register": "dquote"
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+w",
        "command": "dance.selections.copy",
        "args": {
            "direction": 1
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+shift+w",
        "command": "dance.selections.copy",
        "args": {
            "direction": -1
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "t",
        "command": "dance.selections.select",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+t",
        "command": "dance.selections.splitLines",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+shift+-",
        "command": "dance.selections.merge",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+t",
        "command": "dance.selections.split",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "i",
        "command": "dance.selections.reduce",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+i",
        "command": "dance.selections.changeDirection",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+u",
        "command": "editor.action.smartSelect.expand",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+o",
        "command": "editor.action.smartSelect.shrink",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+j",
        "command": "???",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+b",
        "command": "???",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+5",
        "command": "dance.select.buffer",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "k",
        "command": "dance.select.line.below.extend",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+k",
        "command": "dance.selections.expandToLines",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+k",
        "command": "dance.selections.trimLines",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "h",
        "command": "dance.openMenu",
        "args": {
            "menu": "match-hx",
            "pass": [
                {
                    "inner": true,
                    "open": false
                }
            ]
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "[",
        "command": "dance.openMenu",
        "args": {
            "menu": "left-bracket-hx",
            "pass": [
                {
                    "shift": "jump"
                }
            ]
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+[",
        "command": "dance.run",
        "args": {
            "code": [
                "let pos = Selections.mapByIndex((_i, sel, document) => Objects.paragraph.start(Positions.previous(sel.active)));",
                "if (Context.current.mode.name !== 'helix/select') {",
                "await vscode.commands.executeCommand('dance.selections.reduce');",
                "}",
                "Selections.updateWithFallbackByIndex((i, sel, document) => new vscode.Selection(sel.anchor, pos[i], undefined, document));"
            ]
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+]",
        "command": "dance.run",
        "args": {
            "code": [
                "let pos = Selections.mapByIndex((_i, sel, document) => Objects.paragraph.end(sel.active));",
                "if (Context.current.mode.name !== 'helix/select') {",
                "await vscode.commands.executeCommand('dance.selections.reduce');",
                "}",
                "Selections.updateWithFallbackByIndex((i, sel, document) => new vscode.Selection(sel.anchor, pos[i], undefined, document));"
            ]
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "]",
        "command": "dance.openMenu",
        "args": {
            "menu": "right-bracket-hx",
            "pass": [
                {
                    "shift": "jump"
                }
            ]
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": ",",
        "command": "dance.search",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+,",
        "command": "dance.search.backward",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "b",
        "command": "dance.search.next",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+b",
        "command": "dance.search.previous",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+8",
        "command": "dance.search.selection.smart",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+shift+8",
        "command": "dance.search.selection",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "f",
        "command": "dance.history.undo",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+f",
        "command": "dance.history.redo",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+f",
        "command": "dance.history.undo.selections",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+shift+f",
        "command": "dance.history.redo.selections",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "x",
        "command": "dance.selections.saveText",
        "args": {
            "register": "dquote"
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "j",
        "command": "dance.edit.paste.after",
        "args": {
            "register": "dquote"
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+j",
        "command": "dance.edit.paste.before",
        "args": {
            "register": "dquote"
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "v",
        "command": "dance.history.recording.play",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+v",
        "command": "dance.history.recording.start",
        "when": "editorTextFocus && dance.mode == 'normal' && !dance.isRecording || editorTextFocus && dance.mode == 'select' && !dance.isRecording"
    },
    {
        "key": "shift+v",
        "command": "dance.history.recording.stop",
        "when": "editorTextFocus && dance.mode == 'normal' &&  dance.isRecording || editorTextFocus && dance.mode == 'select' &&  dance.isRecording"
    },
    {
        "key": "shift+'",
        "command": "dance.edit.deindent.withIncomplete",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+/",
        "command": "dance.edit.indent",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "=",
        "command": "editor.action.formatSelection",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+n",
        "command": "dance.edit.join",
        "when": "editorTextFocus && dance.mode == 'normal'"
    },
    {
        "key": "shift+n",
        "command": "dance.select.line.below.extend",
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+shift+n",
        "command": "dance.edit.join.select",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+shift+a",
        "command": "dance.selections.filter.regexp.inverse",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "'",
        "command": "dance.selections.clear.secondary",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+'",
        "command": "dance.selections.clear.main",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+7",
        "command": "dance.edit.align",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+-",
        "command": "dance.selections.trimWhitespace",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+9",
        "command": "dance.selections.rotate.selections",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+0",
        "command": "dance.selections.rotate.selections.reverse",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+shift+9",
        "command": "dance.selections.rotate.both",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+shift+0",
        "command": "dance.selections.rotate.both.reverse",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+shift+i",
        "command": "dance.selections.faceForward",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "/",
        "command": "dance.history.repeat.edit",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "escape",
        "command": "dance.modes.set.normal",
        "when": "editorTextFocus && dance.mode != 'normal'"
    },
    {
        "key": "pageup",
        "command": "dance.select.vertically",
        "args": {
            "direction": -1,
            "by": "halfPage",
            "shift": "jump"
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "pagedown",
        "command": "dance.select.vertically",
        "args": {
            "direction": 1,
            "by": "halfPage",
            "shift": "jump"
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "tab",
        "command": "workbench.action.navigateForward",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "space",
        "command": "dance.openMenu",
        "args": {
            "menu": "leader-hx",
            "pass": [
                {
                    "shift": "jump"
                }
            ]
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "z",
        "command": "dance.openMenu",
        "args": {
            "menu": "view-hx",
            "pass": [
                {
                    "shift": "jump"
                }
            ]
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+z",
        "command": "dance.openMenu",
        "args": {
            "menu": "view-hx",
            "pass": [
                {
                    "shift": "jump"
                }
            ],
            "locked": true
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+;",
        "command": "dance.selectRegister",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+1",
        "command": "dance.selections.pipe.prepend",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "alt+shift+1",
        "command": "dance.selections.pipe.append",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+4",
        "command": "dance.selections.filter",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+\\",
        "command": "dance.run",
        "args": {
            "code": [
                "let cmd = await prompt({ prompt: 'pipe:' })",
                "await vscode.commands.executeCommand('dance.selections.pipe.replace', { expression: '#' + cmd});"
            ]
        },
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "=",
        "command": "editor.emmet.action.incrementNumberByOne",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "-",
        "command": "editor.emmet.action.decrementNumberByOne",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "\\",
        "command": "dance.ignore",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": ";",
        "command": "editor.action.formatDocument",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+x",
        "command": "dance.ignore",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+r",
        "command": "dance.ignore",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+g",
        "command": "dance.ignore",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+h",
        "command": "dance.ignore",
        "when": "editorTextFocus && dance.mode == 'normal' || editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": ".",
        "command": "dance.select.left.extend",
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "n",
        "command": "dance.select.down.extend",
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "a",
        "command": "dance.select.up.extend",
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "e",
        "command": "dance.select.right.extend",
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "m",
        "command": "dance.run",
        "args": {
            "code": [
                "const oldAnchor = Selections.mapByIndex((_i, sel) => sel.anchor);",
                "await vscode.commands.executeCommand('dance.seek.word.extend');",
                "Selections.updateWithFallbackByIndex((i, sel) => sel.isReversed && oldAnchor[i].character >= sel.anchor.character ? new vscode.Selection(Positions.at(sel.anchor.line, sel.anchor.character+1), sel.active) : sel);"
            ]
        },
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "q",
        "command": "dance.run",
        "args": {
            "code": [
                "const oldAnchor = Selections.mapByIndex((_i, sel) => sel.anchor);",
                "await vscode.commands.executeCommand('dance.seek.word.extend.backward');",
                "Selections.updateWithFallbackByIndex((i, sel) => !sel.isReversed && oldAnchor[i].character < sel.anchor.character ? new vscode.Selection(Positions.at(sel.anchor.line, sel.anchor.character-1), sel.active) : sel);"
            ]
        },
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "l",
        "command": "dance.run",
        "args": {
            "code": [
                "const oldAnchor = Selections.mapByIndex((_i, sel) => sel.anchor);",
                "await vscode.commands.executeCommand('dance.seek.wordEnd.extend');",
                "Selections.updateWithFallbackByIndex((i, sel) => sel.isReversed && oldAnchor[i].character >= sel.anchor.character ? new vscode.Selection(Positions.at(sel.anchor.line, sel.anchor.character+1), sel.active) : sel);"
            ]
        },
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+m",
        "command": "dance.seek.word",
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+q",
        "command": "dance.seek.word.backward",
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+l",
        "command": "dance.seek.wordEnd",
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": ",",
        "command": "dance.search.extend",
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+,",
        "command": "dance.search.backward.extend",
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "b",
        "command": "dance.search.next.add",
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+b",
        "command": "dance.search.previous.add",
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "p",
        "command": "dance.seek.extend",
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "d",
        "command": "dance.seek.included.extend",
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+p",
        "command": "dance.seek.backward",
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+d",
        "command": "dance.seek.included.backward",
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+.",
        "command": "dance.select.lineStart.skipBlank.extend",
        "args": [
            {
                "shift": "extend"
            }
        ],
        "when": "editorTextFocus && (dance.mode == 'select' || dance.mode == 'normal')"
    },
    {
        "key": "shift+e",
        "command": "dance.select.lineEnd.extend",
        "args": [
            {
                "shift": "extend"
            }
        ],
        "when": "editorTextFocus && (dance.mode == 'select' || dance.mode == 'normal')"
    },
    {
        "key": "pageup",
        "command": "dance.select.vertically",
        "args": {
            "shift": "extend",
            "direction": -1,
            "by": "halfPage"
        },
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "pagedown",
        "command": "dance.select.vertically",
        "args": {
            "shift": "extend",
            "direction": 1,
            "by": "halfPage"
        },
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "g",
        "command": "dance.modes.set.normal",
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "y",
        "command": "dance.openMenu",
        "args": {
            "menu": "goto-hx",
            "pass": [
                {
                    "shift": "extend"
                }
            ]
        },
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "h",
        "command": "dance.openMenu",
        "args": {
            "menu": "match-hx"
        },
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "z",
        "command": "dance.openMenu",
        "args": {
            "menu": "view-hx",
            "pass": [
                {
                    "shift": "extend"
                }
            ]
        },
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+z",
        "command": "dance.openMenu",
        "args": {
            "menu": "view-hx",
            "pass": [
                {
                    "shift": "extend"
                }
            ],
            "locked": true
        },
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "ctrl+w",
        "command": "dance.openMenu",
        "args": {
            "menu": "window-hx",
            "pass": [
                {
                    "shift": "extend"
                }
            ]
        },
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "backspace",
        "command": "dance.openMenu",
        "args": {
            "menu": "ui-hx"
        },
        "when": "editorTextFocus && dance.mode == 'normal' || dance.mode == 'select'"
    },
    {
        "key": "[",
        "command": "dance.openMenu",
        "args": {
            "menu": "left-bracket-hx",
            "pass": [
                {
                    "shift": "extend"
                }
            ]
        },
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "]",
        "command": "dance.openMenu",
        "args": {
            "menu": "right-bracket-hx",
            "pass": [
                {
                    "shift": "extend"
                }
            ]
        },
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "space",
        "command": "dance.openMenu",
        "args": {
            "menu": "leader-hx",
            "pass": [
                {
                    "shift": "extend"
                }
            ]
        },
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "c",
        "command": "dance.run",
        "args": {
            "commands": [
                ".edit.replaceCharacters",
                ".modes.set.normal"
            ]
        },
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "shift+c",
        "command": "dance.run",
        "args": {
            "commands": [
                [
                    ".selections.saveText",
                    {
                        "register": "tmp"
                    }
                ],
                [
                    ".edit.insert",
                    {
                        "register": "dquote"
                    }
                ],
                [
                    ".updateRegister",
                    {
                        "copyFrom": "tmp"
                    }
                ],
                ".modes.set.normal"
            ]
        },
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "x",
        "command": "dance.run",
        "args": {
            "commands": [
                [
                    ".selections.saveText",
                    {
                        "register": "dquote"
                    }
                ],
                ".modes.set.normal"
            ]
        },
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "r",
        "command": "dance.run",
        "args": {
            "commands": [
                [
                    ".edit.yank-delete",
                    {
                        "register": "dquote"
                    }
                ],
                ".modes.set.normal"
            ]
        },
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "k",
        "command": "dance.run",
        "args": {
            "commands": [
                [
                    ".selections.changeDirection",
                    {
                        "direction": 1
                    }
                ],
                ".select.line.below.extend",
                ".selections.expandToLines"
            ]
        },
        "when": "editorTextFocus && dance.mode == 'select'"
    },
    {
        "key": "tab",
        "command": "selectNextQuickFix",
        "when": "editorFocus && quickFixWidgetVisible"
    },
    {
        "key": "tab",
        "command": "selectNextSuggestion",
        "when": "editorTextFocus && suggestWidgetMultipleSuggestions && suggestWidgetVisible"
    },
    {
        "key": "shift+tab",
        "command": "selectPrevQuickFix",
        "when": "editorFocus && quickFixWidgetVisible"
    },
    {
        "key": "shift+tab",
        "command": "selectPrevSuggestion",
        "when": "editorTextFocus && suggestWidgetMultipleSuggestions && suggestWidgetVisible"
    },
    {
        "key": "ctrl+r",
        "command": "dance.edit.selectRegister-insert",
        "when": "editorTextFocus && dance.mode == 'insert'"
    },
    {
        "key": "ctrl+w",
        "command": "deleteWordLeft",
        "when": "editorTextFocus && dance.mode == 'insert'"
    },
    {
        "key": "alt+r",
        "command": "deleteWordRight",
        "when": "editorTextFocus && dance.mode == 'insert'"
    },
    {
        "key": "ctrl+u",
        "command": "deleteAllLeft",
        "when": "editorTextFocus && dance.mode == 'insert'"
    },
    {
        "key": "ctrl+k",
        "command": "deleteAllRight",
        "when": "editorTextFocus && dance.mode == 'insert'"
    },
    {
        "key": "ctrl+h",
        "command": "deleteLeft",
        "when": "editorTextFocus && dance.mode == 'insert'"
    },
    {
        "key": "ctrl+d",
        "command": "deleteRight",
        "when": "editorTextFocus && dance.mode == 'insert'"
    },
    {
        "key": "ctrl+j",
        "command": "dance.edit.newLine.below.insert",
        "when": "editorTextFocus && dance.mode == 'insert'"
    },
    {
        "key": "browserback",
        "command": "workbench.action.navigateBack",
        "when": "canNavigateBack"
    },
    {
        "key": "alt+left",
        "command": "-workbench.action.navigateBack",
        "when": "canNavigateBack"
    },
    {
        "key": "browserforward",
        "command": "workbench.action.navigateForward",
        "when": "canNavigateForward"
    },
    {
        "key": "alt+right",
        "command": "-workbench.action.navigateForward",
        "when": "canNavigateForward"
    },
    {
        "key": "pageup",
        "command": "-cursorPageUp",
        "when": "textInputFocus"
    },
    {
        "key": "shift+pageup",
        "command": "-cursorPageUpSelect",
        "when": "textInputFocus"
    },
    {
        "key": "pagedown",
        "command": "-cursorPageDown",
        "when": "textInputFocus"
    },
    {
        "key": "shift+pagedown",
        "command": "-cursorPageDownSelect",
        "when": "textInputFocus"
    },
    {
        "key": "ctrl+b",
        "command": "-dance.select.vertically",
        "when": "editorTextFocus && dance.mode == 'normal'"
    },
    {
        "key": "ctrl+b",
        "command": "-dance.select.vertically",
        "when": "editorTextFocus && dance.mode == 'insert'"
    },
    {
        "key": "ctrl+v",
        "command": "-dance.modes.set.temporarily.insert",
        "when": "editorTextFocus && dance.mode == 'normal'"
    },
    {
        "key": "ctrl+v",
        "command": "-dance.modes.set.temporarily.normal",
        "when": "editorTextFocus && dance.mode == 'insert'"
    },
    {
        "key": "ctrl+d",
        "command": "-dance.select.vertically",
        "when": "editorTextFocus && dance.mode == 'normal'"
    },
    {
        "key": "ctrl+d",
        "command": "-dance.select.vertically",
        "when": "editorTextFocus && dance.mode == 'insert'"
    },
    {
        "key": "shift+alt+d",
        "command": "-editor.action.formatDocument",
        "when": "editorHasDocumentFormattingProvider && editorTextFocus && !editorReadonly && !inCompositeEditor"
    },
    {
        "key": "shift+alt+d",
        "command": "-editor.action.formatDocument.none",
        "when": "editorTextFocus && !editorHasDocumentFormattingProvider && !editorReadonly"
    },
    {
        "key": "ctrl+s",
        "command": "editor.action.formatDocument"
    }
]
